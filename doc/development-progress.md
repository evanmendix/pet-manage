# 開發進度報告與未來計畫

本文旨在分析目前專案的開發現況，並規劃後續的開發步驟。

## 1. 開發現況分析

### 後端 API (Backend - Kotlin/Ktor)

*   **狀態**: 部分完成。
*   專案已依照 `doc/api/sd.md` 的規劃完成基礎架構。
*   **已完成功能**:
    *   `POST /users`: 建立新使用者。
    *   `PUT /users/{userId}`: 更新使用者資訊。
    *   `POST /feedings`: 新增餵食紀錄。
    *   `GET /feedings`: 取得最近的餵食紀錄。
*   **待辦功能**:
    *   `GET /status/current`: 取得當前餵食狀態 (對應 US-04)。
    *   `POST /pets/{petId}/weights`: 新增體重紀錄 (對應 US-07)。
    *   `GET /pets/{petId}/weights`: 取得歷史體重紀錄 (對應 US-07)。
    *   `GET /albums/photos`: 取得相簿照片 (對應 US-08)。
    *   定時檢查與推播通知服務 (對應 US-06)。

### 前端 App (Frontend - Android)

*   **狀態**: 尚未開始。
*   目前只有設計與規格文件 (`doc/android-app/`)，尚未建立任何專案或撰寫程式碼。

---

## 2. 剩餘進度開發計畫

為了完成所有使用者故事 (User Stories)，我們規劃了以下的開發路徑。

### 後端開發計畫 (Kotlin/Ktor)

#### Phase 1: 核心功能補齊

1.  **實作狀態檢查 API**:
    *   **目標**: 完成 `GET /status/current` 端點，用於 App 在餵食前檢查是否已有其他人餵過。
    *   **對應故事**: US-04 (避免重複餵食)。
2.  **實作體重記錄 API**:
    *   **目標**: 完成 `POST /pets/{petId}/weights` 與 `GET /pets/{petId}/weights` 端點。
    *   **對應故事**: US-07 (記錄並查看貓咪的歷史體重)。

#### Phase 2: 進階功能開發

1.  **實作相簿 API**:
    *   **目標**: 完成 `GET /albums/photos` 端點，讓 App 能取得所有餵食照片。
    *   **對應故事**: US-08 (擁有一個自動整理所有餵食照片的專屬相簿)。
2.  **實作定時通知服務**:
    *   **目標**: 在 Ktor 中加入一個定時任務 (e.g., 使用 `kotlinx-coroutines-core` 的 `ticker` 或 Quartz)，每日定時檢查是否已餵食。若未餵食，則透過 `Firebase Admin SDK` 發送推播通知。
    *   **對應故事**: US-06 (如果到了該吃飯的時間還沒有人餵貓，我能收到手機通知)。

### 前端開發計畫 (Android App)

#### Phase 1: 基礎建設

1.  **專案初始化**:
    *   **目標**: 建立一個新的 Android 專案，並整合 `Kotlin`, `MVVM`, `Hilt`, `Jetpack Compose`, `Retrofit` 等核心函式庫。
2.  **使用者首次設定**:
    *   **目標**: 實作 App 首次啟動時的流程，包含 `Firebase` 匿名登入、引導使用者設定名稱與大頭貼，並呼叫 `POST /users` API。
    *   **對應故事**: US-01 (首次使用 App 時設定我的名字與大頭貼)。
3.  **主畫面與紀錄列表**:
    *   **目標**: 建立 App 主畫面，並串接 `GET /feedings` API，顯示最近的餵食紀錄列表。
    *   **對應故事**: US-05 (隨時查看最近的餵食紀錄)。

#### Phase 2: 核心功能

1.  **完整餵食流程**:
    *   **目標**: 實作點擊「餵食」按鈕後的完整流程，包含呼叫 `GET /status/current` 檢查、(若通過) 啟動相機、上傳照片、呼叫 `POST /feedings`。
    *   **對應故事**: US-04 (在記錄「正餐」時，如果已經有人餵過，系統能跳出警告)。
2.  **快捷功能整合**:
    *   **目標**: 實作 `App Widgets` 與 `App Shortcuts`，讓使用者能從手機桌面一鍵啟動餵食流程。
    *   **對應故事**: US-02 (將「餵食」小工具放在手機桌面上), US-03 (長按 App 圖示時，能直接選擇要餵「正餐」還是「點心」)。

#### Phase 3: 進階功能與通知

1.  **體重追蹤功能**:
    *   **目標**: 建立體重記錄頁面與歷史趨勢圖，並串接後端 API。
    *   **對應故事**: US-07 (記錄並查看貓咪的歷史體重與趨勢圖)。
2.  **寵物相簿**:
    *   **目標**: 建立一個專屬相簿頁面，展示所有貓咪的照片。
    *   **對應故事**: US-08 (擁有一個自動整理所有餵食照片的專屬相簿)。
3.  **推播通知**:
    *   **目標**: 整合 `Firebase Cloud Messaging (FCM)`，讓 App 能夠接收並顯示來自後端的提醒通知。
    *   **對應故事**: US-06 (確保貓咪不會餓肚子)。
